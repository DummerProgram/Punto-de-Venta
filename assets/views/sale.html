<section class="container mt-5">
  <div class="shadow-lg p-3 mb-2 rounded bg-dark text-light">
      <h2>Punto de Venta</h2>
  </div>
  <div class="shadow-lg p-3 mt-4 mb-2 rounded ">
    <div class="shadow-lg p-2 rounded bg-dark text-light">
      <h5>Venta</h5>
    </div>
    <form class="mt-3" ng-submit="addSale()">
      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="inputClient">Cliente</label>
          <select id="inputClient" class="form-control" ng-change="validateDiv()" ng-model="sale.cliente">
            <option ng-repeat="regClient in toDoListClient">{{regClient.nombre}}</option>
          </select>
        </div>
        <div class="form-group col-md-6">
          <label for="inputClient">Producto</label>
          <select id="inputClient" class="form-control" ng-change="validateDiv()" ng-model="sale.producto">
            <option ng-repeat="regProduct in toDoListProduct">{{regProduct.nombre}}</option>
          </select>
        </div>
      </div>
      <div class="form-row" ng-if="flagdivform">
        <div class="form-group col-md-6">
          <label for="inputName">Cantidad</label>
          <input type="text" class="form-control" id="inputName" placeholder="cantidad" ng-model="sale.cantidad">
        </div>
        <div class="form-group col-md-6">
          <label for="inputName">Importe</label>
          <input type="text" class="form-control" id="inputName" placeholder="$100" ng-model="sale.precio">
        </div>
      </div>
      <button type="submit" class="btn btn-primary" ng-disabled="flagbutton">Guardar</button>
    </form>
  </div>

  <div class="shadow-lg p-3 mt-4 mb-2 rounded " ng-if='toDoListSale.length != 0 && toDoListSale != null && toDoListSale != undefined'>
    <table class="table table-bordered">
      <thead class="thead-dark">
        <tr>
          <th scope="col">Codigo</th>
          <th scope="col">Producto</th>
          <th scope="col">Precio Unitario</th>
          <th scope="col">Total</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="regSale in toDoListSale">
          <td>{{regSale.codigo}}</td>
          <td>{{regSale.producto}}</td>
          <td>{{regSale.precio | currency}}</td>
          <td>{{regSale.total | currency}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<section class="container mt-5">
  <div class="shadow-lg p-3 mt-4 mb-2 rounded">
    <div class="shadow-lg p-2 rounded bg-dark text-light">
      <h5>Totales</h5>
    </div>
    <form class="mt-3" ng-submit="confirmTotal()">
      <div class="form-row">
        <div class="form-group col-md-4">
          <label for="inputClient">Cliente</label>
          <select id="inputClient" class="form-control" ng-change="validateTotal()" ng-model="total.cliente">
            <option ng-repeat="regClient in toDoListClient">{{regClient.nombre}}</option>
          </select>
        </div>
        <div class="form-group col-md-4">
          <label for="inputPay">Tipo de Pago</label>
          <select id="inputPay" class="form-control" ng-change="validateTotal()" ng-model="total.metodoPago">
            <option>Efectivo</option>
            <option>Tarjete de Credito o Debito</option>
          </select>
        </div>
        <div class="form-group col-md-4">
          <label for="inputQuantities">Cantidad a pagar</label>
          <input type="text" class="form-control" id="inputQuantities" placeholder="0" ng-change="validateTotal()" ng-model="total.subtotal">
        </div>
      </div>

      <div class="mt-3" ng-if="flagdivformtotal">
        <table class="table table-bordered">
          <thead class="thead-dark">
            <tr>
              <th scope="col">Productos</th>
              <th scope="col">Total</th>
              <th scope="col">Restante</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{total.productos}}</td>
              <td>{{total.total | currency}}</td>
              <td>{{total.total - total.subtotal | currency}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <button type="submit" class="btn btn-primary" ng-disabled="flagbuttontotal">Guardar</button>
    </form>
  </div>
  <div class="shadow-lg p-3 mt-4 mb-2 rounded " ng-if="flagdivtotal">
    <table class="table table-bordered">
      <thead class="thead-dark">
        <tr>
          <th scope="col">Tipo de Pago</th>
          <th scope="col">Cantidad</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{total.metodoPago}}</td>
          <td>{{total.subtotal | currency}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="shadow-lg p-3 mt-4 mb-2 rounded ">
    <form class="mt-3" ng-submit="addTotal()">
      <button type="submit" class="btn btn-primary" ng-disabled="flagbuttonconfirm">Procesar Compra</button>
    </form>
  </div>
</section>
